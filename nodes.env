# Docker remote API
DOCKER_HOST=0.0.0.0:2375

# Try to get specific user configurations
DH_MYNODENIC=$(ip route | grep default | awk '{ print $5 }' | tail -n1)
DH_MYNODEIP=$(ip a s dev ${DH_MYNODENIC} | grep "inet " | awk '{ print $2 }' | cut -d'/' -f1)
DH_MYNODENETWORK=$(ip route show dev ${DH_MYNODENIC} | grep "kernel scope" | awk '{ print $1 }')
DH_MYNODEDNS=$(cat /etc/resolv.conf | grep nameserver | head -n1 | awk '{ print $2}')

# Install services
declare -a DH_SERVICES
DH_SERVICES[0]="consul:s1 influxdb:cf grafana:cf homeassistant:cf"

# Docker Nodes IP
DH_NODEIP[0]="192.168.252.100"

# Consul
DH_CONF_CONSUL_S1_APPNAME="consul"
DH_CONF_CONSUL_S1_IMGNAME="consul:1.0.1"
DH_CONF_CONSUL_S1_BINDIP="${DH_NODEIP[0]}"
DH_CONF_CONSUL_S1_RECURSOR="${DH_NODEDNS}"

# Influxdb
DH_CONF_INFLUXDB_CF_APPNAME="influxdb"
DH_CONF_INFLUXDB_CF_IMGNAME="influxdb:1.4.2"
DH_CONF_INFLUXDB_CF_BINDIP="${DH_NODEIP[0]}"

# Grafana
DH_CONF_GRAFANA_CF_APPNAME="grafana"
DH_CONF_GRAFANA_CF_IMGNAME="grafana/grafana:4.6.2"
DH_CONF_GRAFANA_CF_BINDIP="${DH_NODEIP[0]}"
DH_CONF_GRAFANA_CF_INFLUXDB_SERVER="${DH_CONF_INFLUXDB_CF_BINDIP}"

# Homeassistant
DH_CONF_HOMEASSISTANT_CF_APPNAME="homeassistant"
DH_CONF_HOMEASSISTANT_CF_IMGNAME="homeassistant/home-assistant:0.58.1"
DH_CONF_HOMEASSISTANT_CF_CONSUL_SERVER="${DH_NODEIP[0]}"
DH_CONF_HOMEASSISTANT_CF_INFLUXDB_SERVER="${DH_NODEIP[0]}"
